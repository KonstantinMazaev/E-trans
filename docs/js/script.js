"use strict";

function ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); enumerableOnly && (symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; })), keys.push.apply(keys, symbols); } return keys; }

function _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = null != arguments[i] ? arguments[i] : {}; i % 2 ? ownKeys(Object(source), !0).forEach(function (key) { _defineProperty(target, key, source[key]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } return target; }

function _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }

//Maps
var flag = 0;
window.addEventListener('scroll', function () {
  var scrollY = window.scrollY;
  var mapOffset = document.querySelector('.contacts__map-wrap').offsetTop;

  if (scrollY >= mapOffset - 500 && flag == 0) {
    var init = function init() {
      var map = new ymaps.Map('map', {
        center: center,
        zoom: 12
      });
      var placemark = new ymaps.Placemark(center, {
        balloonContent: "\n                    <div class=\"balloon\">\n                        <h2 class=\"balloon__title\">\u041E\u041E\u041E \"\u0420\u043E\u0433\u0430 \u0438 \u043A\u043E\u043F\u044B\u0442\u0430\"</h2>\n                        <div class=\"balloon__contacts\">\n                            <p><span>\u0410\u0434\u0440\u0435\u0441:</span>\u0443\u043B. \u0413\u0435\u043D\u0435\u0440\u0430\u043B\u0430 \u0422\u044E\u043B\u0435\u043D\u0435\u0432\u0430, 25\u0410, \u041C\u043E\u0441\u043A\u0432\u0430</p>\n                            <p><span>\u0420\u0435\u0436\u0438\u043C \u0440\u0430\u0431\u043E\u0442\u044B:</span>08:00 - 23:00</p>\n                            <p><span>\u0422\u0435\u043B\u0435\u0444\u043E\u043D:</span>8 (800) 555-55-55</p>\n                        </div>\n                    </div>\n                "
      }, {
        iconLayout: 'default#image',
        iconImageHref: 'img/svg/mark.svg',
        iconImageSize: [70, 70],
        iconImageOffset: [-35, -65]
      });
      map.controls.remove('geolocationControl'); // удаляем геолокацию

      map.controls.remove('searchControl'); // удаляем поиск

      map.controls.remove('trafficControl'); // удаляем контроль трафика

      map.controls.remove('typeSelector'); // удаляем тип

      map.controls.remove('fullscreenControl'); // удаляем кнопку перехода в полноэкранный режим

      map.controls.remove('zoomControl'); // удаляем контрол зуммирования

      map.controls.remove('rulerControl'); // удаляем контрол правил

      map.behaviors.disable(['scrollZoom']); // отключаем скролл карты

      map.geoObjects.add(placemark);
    };

    var center = [55.7724, 37.6252];
    ymaps.ready(init);
    flag = 1;
  }
}); // Modal

var disabledScroll = function disabledScroll() {
  document.body.style.cssText = "\n        overflow: hidden;\n        top: -".concat(window.scrollY, "px;\n        left: 0;\n        height: 100wh;\n        width: 100wv;\n        padding-right: ").concat(window.innerWidth - document.body.offsetWidth, "px;\n    ");
};

var enabledScroll = function enabledScroll() {
  document.body.style.cssText = '';
};

var createElem = function createElem(tag, attr) {
  var elem = document.createElement(tag);
  return Object.assign(elem, _objectSpread({}, attr));
};

var createModal = function createModal(title, description) {
  var overlayElem = createElem('div', {
    className: 'modal'
  });
  var modalElem = createElem('div', {
    className: 'modal__block'
  });
  var modalContainerElem = createElem('div', {
    className: 'modal__container'
  });
  var titleElem = createElem('h2', {
    className: 'modal__title',
    innerHTML: "\u0417\u0430\u043A\u0430\u0437\u0430\u0442\u044C<br> ".concat(title)
  });
  var descriptionElem = createElem('p', {
    className: 'modal__description',
    textContent: description
  });
  var formElem = createElem('form', {
    className: 'modal__form',
    method: 'post',
    action: 'https://jsonplaceholder.typicode.com/posts',
    id: 'order'
  });
  var nameLabelElem = createElem('label', {
    className: 'modal__label',
    textContent: 'Имя'
  });
  var nameInputElem = createElem('input', {
    className: 'modal__input',
    placeholder: 'Введите ваше имя',
    name: 'name',
    required: true
  });
  var phoneLabelElem = createElem('label', {
    className: 'modal__label',
    textContent: 'Телефон'
  });
  var phoneInputElem = createElem('input', {
    className: 'modal__input',
    placeholder: 'Введите ваш телефон',
    name: 'phone',
    required: true
  });
  var hideInput = createElem('input', {
    type: 'hidden',
    name: 'product',
    value: title
  });
  var btnSubmit = createElem('button', {
    className: 'modal__btn',
    textContent: 'Заказать',
    type: 'submit'
  });
  btnSubmit.setAttribute('form', 'order');
  var closeModalBtn = createElem('button', {
    className: 'modal__close',
    innerHTML: "\n        <svg width=\"18\" height=\"18\" viewBox=\"0 0 18 18\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\n            <path d=\"M17.75 2.0125L15.9875 0.25L9 7.2375L2.0125 0.25L0.25 2.0125L7.2375 9L0.25 15.9875L2.0125 17.75L9 10.7625L15.9875 17.75L17.75 15.9875L10.7625 9L17.75 2.0125Z\" fill=\"#18171A\"/>\n        </svg>\n        "
  });
  overlayElem.addEventListener('click', function (event) {
    var target = event.target;

    if (target === overlayElem || target.closest('.modal__close')) {
      overlayElem.remove();
      enabledScroll();
    }
  });
  nameLabelElem.append(nameInputElem);
  phoneLabelElem.append(phoneInputElem);
  formElem.append(nameLabelElem, phoneLabelElem, hideInput);
  modalContainerElem.append(titleElem, descriptionElem, formElem, btnSubmit, closeModalBtn);
  modalElem.append(modalContainerElem);
  overlayElem.append(modalElem);
  disabledScroll();
  document.body.append(overlayElem);
};

var productTitle = document.querySelectorAll('.product__title');
var productDescription = document.querySelectorAll('.product__description');
var productBtn = document.querySelectorAll('.product__btn');

var _loop = function _loop(i) {
  productBtn[i].addEventListener('click', function () {
    var title = productTitle[i].textContent;
    var description = productDescription[i].textContent;
    createModal(title, description);
  });
};

for (var i = 0; i < productBtn.length; i++) {
  _loop(i);
}
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNjcmlwdC5qcyJdLCJuYW1lcyI6WyJmbGFnIiwid2luZG93IiwiYWRkRXZlbnRMaXN0ZW5lciIsInNjcm9sbFkiLCJtYXBPZmZzZXQiLCJkb2N1bWVudCIsInF1ZXJ5U2VsZWN0b3IiLCJvZmZzZXRUb3AiLCJpbml0IiwibWFwIiwieW1hcHMiLCJNYXAiLCJjZW50ZXIiLCJ6b29tIiwicGxhY2VtYXJrIiwiUGxhY2VtYXJrIiwiYmFsbG9vbkNvbnRlbnQiLCJpY29uTGF5b3V0IiwiaWNvbkltYWdlSHJlZiIsImljb25JbWFnZVNpemUiLCJpY29uSW1hZ2VPZmZzZXQiLCJjb250cm9scyIsInJlbW92ZSIsImJlaGF2aW9ycyIsImRpc2FibGUiLCJnZW9PYmplY3RzIiwiYWRkIiwicmVhZHkiLCJkaXNhYmxlZFNjcm9sbCIsImJvZHkiLCJzdHlsZSIsImNzc1RleHQiLCJpbm5lcldpZHRoIiwib2Zmc2V0V2lkdGgiLCJlbmFibGVkU2Nyb2xsIiwiY3JlYXRlRWxlbSIsInRhZyIsImF0dHIiLCJlbGVtIiwiY3JlYXRlRWxlbWVudCIsIk9iamVjdCIsImFzc2lnbiIsImNyZWF0ZU1vZGFsIiwidGl0bGUiLCJkZXNjcmlwdGlvbiIsIm92ZXJsYXlFbGVtIiwiY2xhc3NOYW1lIiwibW9kYWxFbGVtIiwibW9kYWxDb250YWluZXJFbGVtIiwidGl0bGVFbGVtIiwiaW5uZXJIVE1MIiwiZGVzY3JpcHRpb25FbGVtIiwidGV4dENvbnRlbnQiLCJmb3JtRWxlbSIsIm1ldGhvZCIsImFjdGlvbiIsImlkIiwibmFtZUxhYmVsRWxlbSIsIm5hbWVJbnB1dEVsZW0iLCJwbGFjZWhvbGRlciIsIm5hbWUiLCJyZXF1aXJlZCIsInBob25lTGFiZWxFbGVtIiwicGhvbmVJbnB1dEVsZW0iLCJoaWRlSW5wdXQiLCJ0eXBlIiwidmFsdWUiLCJidG5TdWJtaXQiLCJzZXRBdHRyaWJ1dGUiLCJjbG9zZU1vZGFsQnRuIiwiZXZlbnQiLCJ0YXJnZXQiLCJjbG9zZXN0IiwiYXBwZW5kIiwicHJvZHVjdFRpdGxlIiwicXVlcnlTZWxlY3RvckFsbCIsInByb2R1Y3REZXNjcmlwdGlvbiIsInByb2R1Y3RCdG4iLCJpIiwibGVuZ3RoIl0sIm1hcHBpbmdzIjoiOzs7Ozs7OztBQUFBO0FBQ0EsSUFBSUEsSUFBSSxHQUFHLENBQVg7QUFFQUMsTUFBTSxDQUFDQyxnQkFBUCxDQUF3QixRQUF4QixFQUFrQyxZQUFZO0FBQzFDLE1BQUlDLE9BQU8sR0FBR0YsTUFBTSxDQUFDRSxPQUFyQjtBQUNBLE1BQUlDLFNBQVMsR0FBR0MsUUFBUSxDQUFDQyxhQUFULENBQXVCLHFCQUF2QixFQUE4Q0MsU0FBOUQ7O0FBRUEsTUFBS0osT0FBTyxJQUFJQyxTQUFTLEdBQUcsR0FBeEIsSUFBaUNKLElBQUksSUFBSSxDQUE3QyxFQUFpRDtBQUFBLFFBSXBDUSxJQUpvQyxHQUk3QyxTQUFTQSxJQUFULEdBQWdCO0FBQ1osVUFBSUMsR0FBRyxHQUFHLElBQUlDLEtBQUssQ0FBQ0MsR0FBVixDQUFjLEtBQWQsRUFBcUI7QUFDM0JDLFFBQUFBLE1BQU0sRUFBRUEsTUFEbUI7QUFFM0JDLFFBQUFBLElBQUksRUFBRTtBQUZxQixPQUFyQixDQUFWO0FBS0EsVUFBSUMsU0FBUyxHQUFHLElBQUlKLEtBQUssQ0FBQ0ssU0FBVixDQUFvQkgsTUFBcEIsRUFBNEI7QUFDeENJLFFBQUFBLGNBQWM7QUFEMEIsT0FBNUIsRUFXYjtBQUNDQyxRQUFBQSxVQUFVLEVBQUUsZUFEYjtBQUVDQyxRQUFBQSxhQUFhLEVBQUUsa0JBRmhCO0FBR0NDLFFBQUFBLGFBQWEsRUFBRSxDQUFDLEVBQUQsRUFBSyxFQUFMLENBSGhCO0FBSUNDLFFBQUFBLGVBQWUsRUFBRSxDQUFDLENBQUMsRUFBRixFQUFNLENBQUMsRUFBUDtBQUpsQixPQVhhLENBQWhCO0FBa0JBWCxNQUFBQSxHQUFHLENBQUNZLFFBQUosQ0FBYUMsTUFBYixDQUFvQixvQkFBcEIsRUF4QlksQ0F3QitCOztBQUMzQ2IsTUFBQUEsR0FBRyxDQUFDWSxRQUFKLENBQWFDLE1BQWIsQ0FB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QkFBa0IsR0FBR3ZFLFFBQVEsQ0FBQ3NFLGdCQUFULENBQTBCLHVCQUExQixDQUEzQjtBQUNBLElBQU1FLFVBQVUsR0FBR3hFLFFBQVEsQ0FBQ3NFLGdCQUFULENBQTBCLGVBQTFCLENBQW5COzsyQkFFU0csQztBQUNMRCxFQUFBQSxVQUFVLENBQUNDLENBQUQsQ0FBVixDQUFjNUUsZ0JBQWQsQ0FBK0IsT0FBL0IsRUFBd0MsWUFBTTtBQUMxQyxRQUFNeUMsS0FBSyxHQUFHK0IsWUFBWSxDQUFDSSxDQUFELENBQVosQ0FBZ0IxQixXQUE5QjtBQUNBLFFBQU1SLFdBQVcsR0FBR2dDLGtCQUFrQixDQUFDRSxDQUFELENBQWxCLENBQXNCMUIsV0FBMUM7QUFDQVYsSUFBQUEsV0FBVyxDQUFDQyxLQUFELEVBQVFDLFdBQVIsQ0FBWDtBQUNILEdBSkQ7OztBQURKLEtBQUssSUFBSWtDLENBQUMsR0FBRyxDQUFiLEVBQWdCQSxDQUFDLEdBQUdELFVBQVUsQ0FBQ0UsTUFBL0IsRUFBdUNELENBQUMsRUFBeEMsRUFBNEM7QUFBQSxRQUFuQ0EsQ0FBbUM7QUFNM0MiLCJzb3VyY2VzQ29udGVudCI6WyIvL01hcHNcclxubGV0IGZsYWcgPSAwO1xyXG5cclxud2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ3Njcm9sbCcsIGZ1bmN0aW9uICgpIHtcclxuICAgIGxldCBzY3JvbGxZID0gd2luZG93LnNjcm9sbFk7XHJcbiAgICBsZXQgbWFwT2Zmc2V0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmNvbnRhY3RzX19tYXAtd3JhcCcpLm9mZnNldFRvcDtcclxuXHJcbiAgICBpZiAoKHNjcm9sbFkgPj0gbWFwT2Zmc2V0IC0gNTAwKSAmJiAoZmxhZyA9PSAwKSkge1xyXG5cclxuICAgICAgICBsZXQgY2VudGVyID0gWzU1Ljc3MjQsIDM3LjYyNTJdO1xyXG5cclxuICAgICAgICBmdW5jdGlvbiBpbml0KCkge1xyXG4gICAgICAgICAgICBsZXQgbWFwID0gbmV3IHltYXBzLk1hcCgnbWFwJywge1xyXG4gICAgICAgICAgICAgICAgY2VudGVyOiBjZW50ZXIsXHJcbiAgICAgICAgICAgICAgICB6b29tOiAxMlxyXG4gICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgIGxldCBwbGFjZW1hcmsgPSBuZXcgeW1hcHMuUGxhY2VtYXJrKGNlbnRlciwge1xyXG4gICAgICAgICAgICAgICAgYmFsbG9vbkNvbnRlbnQ6IGBcclxuICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwiYmFsbG9vblwiPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICA8aDIgY2xhc3M9XCJiYWxsb29uX190aXRsZVwiPtCe0J7QniBcItCg0L7Qs9CwINC4INC60L7Qv9GL0YLQsFwiPC9oMj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cImJhbGxvb25fX2NvbnRhY3RzXCI+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8cD48c3Bhbj7QkNC00YDQtdGBOjwvc3Bhbj7Rg9C7LiDQk9C10L3QtdGA0LDQu9CwINCi0Y7Qu9C10L3QtdCy0LAsIDI10JAsINCc0L7RgdC60LLQsDwvcD5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxwPjxzcGFuPtCg0LXQttC40Lwg0YDQsNCx0L7RgtGLOjwvc3Bhbj4wODowMCAtIDIzOjAwPC9wPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPHA+PHNwYW4+0KLQtdC70LXRhNC+0L06PC9zcGFuPjggKDgwMCkgNTU1LTU1LTU1PC9wPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICAgICAgIGBcclxuICAgICAgICAgICAgfSwge1xyXG4gICAgICAgICAgICAgICAgaWNvbkxheW91dDogJ2RlZmF1bHQjaW1hZ2UnLFxyXG4gICAgICAgICAgICAgICAgaWNvbkltYWdlSHJlZjogJ2ltZy9zdmcvbWFyay5zdmcnLFxyXG4gICAgICAgICAgICAgICAgaWNvbkltYWdlU2l6ZTogWzcwLCA3MF0sXHJcbiAgICAgICAgICAgICAgICBpY29uSW1hZ2VPZmZzZXQ6IFstMzUsIC02NV1cclxuICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICBtYXAuY29udHJvbHMucmVtb3ZlKCdnZW9sb2NhdGlvbkNvbnRyb2wnKTsgLy8g0YPQtNCw0LvRj9C10Lwg0LPQtdC+0LvQvtC60LDRhtC40Y5cclxuICAgICAgICAgICAgbWFwLmNvbnRyb2xzLnJlbW92ZSgnc2VhcmNoQ29udHJvbCcpOyAvLyDRg9C00LDQu9GP0LXQvCDQv9C+0LjRgdC6XHJcbiAgICAgICAgICAgIG1hcC5jb250cm9scy5yZW1vdmUoJ3RyYWZmaWNDb250cm9sJyk7IC8vINGD0LTQsNC70Y/QtdC8INC60L7QvdGC0YDQvtC70Ywg0YLRgNCw0YTQuNC60LBcclxuICAgICAgICAgICAgbWFwLmNvbnRyb2xzLnJlbW92ZSgndHlwZVNlbGVjdG9yJyk7IC8vINGD0LTQsNC70Y/QtdC8INGC0LjQv1xyXG4gICAgICAgICAgICBtYXAuY29udHJvbHMucmVtb3ZlKCdmdWxsc2NyZWVuQ29udHJvbCcpOyAvLyDRg9C00LDQu9GP0LXQvCDQutC90L7Qv9C60YMg0L/QtdGA0LXRhdC+0LTQsCDQsiDQv9C+0LvQvdC+0Y3QutGA0LDQvdC90YvQuSDRgNC10LbQuNC8XHJcbiAgICAgICAgICAgIG1hcC5jb250cm9scy5yZW1vdmUoJ3pvb21Db250cm9sJyk7IC8vINGD0LTQsNC70Y/QtdC8INC60L7QvdGC0YDQvtC7INC30YPQvNC80LjRgNC+0LLQsNC90LjRj1xyXG4gICAgICAgICAgICBtYXAuY29udHJvbHMucmVtb3ZlKCdydWxlckNvbnRyb2wnKTsgLy8g0YPQtNCw0LvRj9C10Lwg0LrQvtC90YLRgNC+0Lsg0L/RgNCw0LLQuNC7XHJcbiAgICAgICAgICAgIG1hcC5iZWhhdmlvcnMuZGlzYWJsZShbJ3Njcm9sbFpvb20nXSk7IC8vINC+0YLQutC70Y7Rh9Cw0LXQvCDRgdC60YDQvtC70Lsg0LrQsNGA0YLRi1xyXG5cclxuICAgICAgICAgICAgbWFwLmdlb09iamVjdHMuYWRkKHBsYWNlbWFyayk7XHJcblxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgeW1hcHMucmVhZHkoaW5pdCk7XHJcblxyXG4gICAgICAgIGZsYWcgPSAxO1xyXG5cclxuICAgIH1cclxufSk7XHJcblxyXG4vLyBNb2RhbFxyXG5cclxuY29uc3QgZGlzYWJsZWRTY3JvbGwgPSAoKSA9PiB7XHJcbiAgICBkb2N1bWVudC5ib2R5LnN0eWxlLmNzc1RleHQgPSBcclxuICAgIGBcclxuICAgICAgICBvdmVyZmxvdzogaGlkZGVuO1xyXG4gICAgICAgIHRvcDogLSR7d2luZG93LnNjcm9sbFl9cHg7XHJcbiAgICAgICAgbGVmdDogMDtcclxuICAgICAgICBoZWlnaHQ6IDEwMHdoO1xyXG4gICAgICAgIHdpZHRoOiAxMDB3djtcclxuICAgICAgICBwYWRkaW5nLXJpZ2h0OiAke3dpbmRvdy5pbm5lcldpZHRoIC0gZG9jdW1lbnQuYm9keS5vZmZzZXRXaWR0aH1weDtcclxuICAgIGBcclxufVxyXG5cclxuY29uc3QgZW5hYmxlZFNjcm9sbCA9ICgpID0+IHtcclxuICAgIGRvY3VtZW50LmJvZHkuc3R5bGUuY3NzVGV4dCA9ICcnO1xyXG59XHJcblxyXG5jb25zdCBjcmVhdGVFbGVtID0gKHRhZywgYXR0cikgPT4ge1xyXG4gICAgY29uc3QgZWxlbSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQodGFnKTtcclxuXHJcbiAgICByZXR1cm4gT2JqZWN0LmFzc2lnbihlbGVtLCB7Li4uYXR0cn0pO1xyXG59O1xyXG5cclxuY29uc3QgY3JlYXRlTW9kYWwgPSAodGl0bGUsIGRlc2NyaXB0aW9uKSA9PiB7XHJcbiAgICBjb25zdCBvdmVybGF5RWxlbSA9IGNyZWF0ZUVsZW0oJ2RpdicsIHtjbGFzc05hbWU6ICdtb2RhbCd9KTtcclxuICAgIGNvbnN0IG1vZGFsRWxlbSA9IGNyZWF0ZUVsZW0oJ2RpdicsIHtjbGFzc05hbWU6ICdtb2RhbF9fYmxvY2snfSk7XHJcbiAgICBjb25zdCBtb2RhbENvbnRhaW5lckVsZW0gPSBjcmVhdGVFbGVtKCdkaXYnLCB7XHJcbiAgICAgICAgY2xhc3NOYW1lOiAnbW9kYWxfX2NvbnRhaW5lcidcclxuICAgIH0pO1xyXG5cclxuICAgIGNvbnN0IHRpdGxlRWxlbSA9IGNyZWF0ZUVsZW0oJ2gyJywge1xyXG4gICAgICAgIGNsYXNzTmFtZTogJ21vZGFsX190aXRsZScsXHJcbiAgICAgICAgaW5uZXJIVE1MOiBg0JfQsNC60LDQt9Cw0YLRjDxicj4gJHt0aXRsZX1gXHJcbiAgICB9KTtcclxuXHJcbiAgICBjb25zdCBkZXNjcmlwdGlvbkVsZW0gPSBjcmVhdGVFbGVtKCdwJywge1xyXG4gICAgICAgIGNsYXNzTmFtZTogJ21vZGFsX19kZXNjcmlwdGlvbicsXHJcbiAgICAgICAgdGV4dENvbnRlbnQ6IGRlc2NyaXB0aW9uXHJcbiAgICB9KTtcclxuXHJcbiAgICBjb25zdCBmb3JtRWxlbSA9IGNyZWF0ZUVsZW0oJ2Zvcm0nLCB7XHJcbiAgICAgICAgY2xhc3NOYW1lOiAnbW9kYWxfX2Zvcm0nLFxyXG4gICAgICAgIG1ldGhvZDogJ3Bvc3QnLFxyXG4gICAgICAgIGFjdGlvbjogJ2h0dHBzOi8vanNvbnBsYWNlaG9sZGVyLnR5cGljb2RlLmNvbS9wb3N0cycsXHJcbiAgICAgICAgaWQ6ICdvcmRlcicsXHJcbiAgICB9KTtcclxuXHJcblxyXG4gICAgY29uc3QgbmFtZUxhYmVsRWxlbSA9IGNyZWF0ZUVsZW0oJ2xhYmVsJywge1xyXG4gICAgICAgIGNsYXNzTmFtZTogJ21vZGFsX19sYWJlbCcsXHJcbiAgICAgICAgdGV4dENvbnRlbnQ6ICfQmNC80Y8nLFxyXG4gICAgfSk7XHJcbiAgICBjb25zdCBuYW1lSW5wdXRFbGVtID0gY3JlYXRlRWxlbSgnaW5wdXQnLCB7XHJcbiAgICAgICAgY2xhc3NOYW1lOiAnbW9kYWxfX2lucHV0JyxcclxuICAgICAgICBwbGFjZWhvbGRlcjogJ9CS0LLQtdC00LjRgtC1INCy0LDRiNC1INC40LzRjycsXHJcbiAgICAgICAgbmFtZTogJ25hbWUnLFxyXG4gICAgICAgIHJlcXVpcmVkOiB0cnVlLFxyXG4gICAgfSk7XHJcblxyXG5cclxuICAgIGNvbnN0IHBob25lTGFiZWxFbGVtID0gY3JlYXRlRWxlbSgnbGFiZWwnLCB7XHJcbiAgICAgICAgY2xhc3NOYW1lOiAnbW9kYWxfX2xhYmVsJyxcclxuICAgICAgICB0ZXh0Q29udGVudDogJ9Ci0LXQu9C10YTQvtC9JyxcclxuICAgIH0pO1xyXG4gICAgY29uc3QgcGhvbmVJbnB1dEVsZW0gPSBjcmVhdGVFbGVtKCdpbnB1dCcsIHtcclxuICAgICAgICBjbGFzc05hbWU6ICdtb2RhbF9faW5wdXQnLFxyXG4gICAgICAgIHBsYWNlaG9sZGVyOiAn0JLQstC10LTQuNGC0LUg0LLQsNGIINGC0LXQu9C10YTQvtC9JyxcclxuICAgICAgICBuYW1lOiAncGhvbmUnLFxyXG4gICAgICAgIHJlcXVpcmVkOiB0cnVlLFxyXG4gICAgfSk7XHJcblxyXG5cclxuICAgIGNvbnN0IGhpZGVJbnB1dCA9IGNyZWF0ZUVsZW0oJ2lucHV0Jywge1xyXG4gICAgICAgIHR5cGU6ICdoaWRkZW4nLFxyXG4gICAgICAgIG5hbWU6ICdwcm9kdWN0JyxcclxuICAgICAgICB2YWx1ZTogdGl0bGUsXHJcbiAgICB9KTtcclxuXHJcbiAgICBjb25zdCBidG5TdWJtaXQgPSBjcmVhdGVFbGVtKCdidXR0b24nLCB7XHJcbiAgICAgICAgY2xhc3NOYW1lOiAnbW9kYWxfX2J0bicsXHJcbiAgICAgICAgdGV4dENvbnRlbnQ6ICfQl9Cw0LrQsNC30LDRgtGMJyxcclxuICAgICAgICB0eXBlOiAnc3VibWl0JyxcclxuICAgIH0pO1xyXG4gICAgYnRuU3VibWl0LnNldEF0dHJpYnV0ZSgnZm9ybScsICdvcmRlcicpO1xyXG5cclxuICAgIGNvbnN0IGNsb3NlTW9kYWxCdG4gPSBjcmVhdGVFbGVtKCdidXR0b24nLCB7XHJcbiAgICAgICAgY2xhc3NOYW1lOiAnbW9kYWxfX2Nsb3NlJyxcclxuICAgICAgICBpbm5lckhUTUw6IFxyXG4gICAgICAgIGBcclxuICAgICAgICA8c3ZnIHdpZHRoPVwiMThcIiBoZWlnaHQ9XCIxOFwiIHZpZXdCb3g9XCIwIDAgMTggMThcIiBmaWxsPVwibm9uZVwiIHhtbG5zPVwiaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmdcIj5cclxuICAgICAgICAgICAgPHBhdGggZD1cIk0xNy43NSAyLjAxMjVMMTUuOTg3NSAwLjI1TDkgNy4yMzc1TDIuMDEyNSAwLjI1TDAuMjUgMi4wMTI1TDcuMjM3NSA5TDAuMjUgMTUuOTg3NUwyLjAxMjUgMTcuNzVMOSAxMC43NjI1TDE1Ljk4NzUgMTcuNzVMMTcuNzUgMTUuOTg3NUwxMC43NjI1IDlMMTcuNzUgMi4wMTI1WlwiIGZpbGw9XCIjMTgxNzFBXCIvPlxyXG4gICAgICAgIDwvc3ZnPlxyXG4gICAgICAgIGAsXHJcbiAgICB9KTtcclxuXHJcbiAgICBvdmVybGF5RWxlbS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGV2ZW50ID0+IHtcclxuICAgICAgICBjb25zdCB0YXJnZXQgPSBldmVudC50YXJnZXQ7XHJcbiAgICAgICAgaWYgKHRhcmdldCA9PT0gb3ZlcmxheUVsZW0gfHwgdGFyZ2V0LmNsb3Nlc3QoJy5tb2RhbF9fY2xvc2UnKSkge1xyXG4gICAgICAgICAgICBvdmVybGF5RWxlbS5yZW1vdmUoKTtcclxuICAgICAgICAgICAgZW5hYmxlZFNjcm9sbCgpO1xyXG4gICAgICAgIH1cclxuICAgIH0pXHJcblxyXG4gICAgbmFtZUxhYmVsRWxlbS5hcHBlbmQobmFtZUlucHV0RWxlbSk7XHJcbiAgICBwaG9uZUxhYmVsRWxlbS5hcHBlbmQocGhvbmVJbnB1dEVsZW0pO1xyXG4gICAgZm9ybUVsZW0uYXBwZW5kKG5hbWVMYWJlbEVsZW0sIHBob25lTGFiZWxFbGVtLCBoaWRlSW5wdXQpO1xyXG5cclxuICAgIG1vZGFsQ29udGFpbmVyRWxlbS5hcHBlbmQodGl0bGVFbGVtLCBkZXNjcmlwdGlvbkVsZW0sIGZvcm1FbGVtLCBidG5TdWJtaXQsIGNsb3NlTW9kYWxCdG4pO1xyXG4gICAgbW9kYWxFbGVtLmFwcGVuZChtb2RhbENvbnRhaW5lckVsZW0pO1xyXG4gICAgb3ZlcmxheUVsZW0uYXBwZW5kKG1vZGFsRWxlbSk7XHJcbiAgICBkaXNhYmxlZFNjcm9sbCgpO1xyXG4gICAgZG9jdW1lbnQuYm9keS5hcHBlbmQob3ZlcmxheUVsZW0pO1xyXG59XHJcblxyXG5jb25zdCBwcm9kdWN0VGl0bGUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcucHJvZHVjdF9fdGl0bGUnKTtcclxuY29uc3QgcHJvZHVjdERlc2NyaXB0aW9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLnByb2R1Y3RfX2Rlc2NyaXB0aW9uJyk7XHJcbmNvbnN0IHByb2R1Y3RCdG4gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcucHJvZHVjdF9fYnRuJyk7XHJcblxyXG5mb3IgKGxldCBpID0gMDsgaSA8IHByb2R1Y3RCdG4ubGVuZ3RoOyBpKyspIHtcclxuICAgIHByb2R1Y3RCdG5baV0uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XHJcbiAgICAgICAgY29uc3QgdGl0bGUgPSBwcm9kdWN0VGl0bGVbaV0udGV4dENvbnRlbnQ7XHJcbiAgICAgICAgY29uc3QgZGVzY3JpcHRpb24gPSBwcm9kdWN0RGVzY3JpcHRpb25baV0udGV4dENvbnRlbnQ7XHJcbiAgICAgICAgY3JlYXRlTW9kYWwodGl0bGUsIGRlc2NyaXB0aW9uKTtcclxuICAgIH0pXHJcbn0iXSwiZmlsZSI6InNjcmlwdC5qcyJ9